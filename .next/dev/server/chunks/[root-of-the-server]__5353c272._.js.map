{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/constantine/Documents/pj10-syllabus-to-cal-3pm/lib/googleCalendar.ts"],"sourcesContent":["import { google } from 'googleapis';\nimport type { CalendarEvent } from '@/types/events';\n\nconst GOOGLE_CLIENT_ID = process.env.GOOGLE_CLIENT_ID || '';\nconst GOOGLE_CLIENT_SECRET = process.env.GOOGLE_CLIENT_SECRET || '';\nconst GOOGLE_REDIRECT_URI = process.env.GOOGLE_REDIRECT_URI || 'http://localhost:3000/api/auth/callback';\n\nexport function createOAuth2Client() {\n  return new google.auth.OAuth2(\n    GOOGLE_CLIENT_ID,\n    GOOGLE_CLIENT_SECRET,\n    GOOGLE_REDIRECT_URI\n  );\n}\n\nexport async function getAuthUrl(state?: string): Promise<string> {\n  const oauth2Client = createOAuth2Client();\n  \n  const scopes = [\n    'https://www.googleapis.com/auth/calendar.events',\n  ];\n\n  const url = oauth2Client.generateAuthUrl({\n    access_type: 'offline',\n    scope: scopes,\n    state: state || 'default',\n    prompt: 'consent',\n  });\n\n  return url;\n}\n\nexport async function getTokenFromCode(code: string) {\n  const oauth2Client = createOAuth2Client();\n  const { tokens } = await oauth2Client.getToken(code);\n  return tokens;\n}\n\nexport async function createCalendarEvents(\n  accessToken: string,\n  events: CalendarEvent[]\n): Promise<string[]> {\n  const oauth2Client = createOAuth2Client();\n  oauth2Client.setCredentials({ access_token: accessToken });\n\n  const calendar = google.calendar({ version: 'v3', auth: oauth2Client });\n  const eventIds: string[] = [];\n\n  for (const event of events) {\n    const startDate = new Date(event.start);\n    const endDate = event.allDay\n      ? new Date(startDate.getTime() + 24 * 60 * 60 * 1000) // Add 1 day for all-day events\n      : new Date(startDate.getTime() + 30 * 60 * 1000); // Add 30 minutes for timed events\n\n    const googleEvent = {\n      summary: event.title,\n      description: event.description || '',\n      location: event.location || '',\n      start: event.allDay\n        ? {\n            date: startDate.toISOString().split('T')[0], // YYYY-MM-DD format for all-day\n            timeZone: 'America/Los_Angeles',\n          }\n        : {\n            dateTime: startDate.toISOString(),\n            timeZone: 'America/Los_Angeles',\n          },\n      end: event.allDay\n        ? {\n            date: endDate.toISOString().split('T')[0],\n            timeZone: 'America/Los_Angeles',\n          }\n        : {\n            dateTime: endDate.toISOString(),\n            timeZone: 'America/Los_Angeles',\n          },\n    };\n\n    try {\n      const response = await calendar.events.insert({\n        calendarId: 'primary',\n        requestBody: googleEvent,\n      });\n\n      if (response.data.id) {\n        eventIds.push(response.data.id);\n      }\n    } catch (error) {\n      console.error(`Failed to create event \"${event.title}\":`, error);\n      throw error;\n    }\n  }\n\n  return eventIds;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAGA,MAAM,mBAAmB,QAAQ,GAAG,CAAC,gBAAgB,IAAI;AACzD,MAAM,uBAAuB,QAAQ,GAAG,CAAC,oBAAoB,IAAI;AACjE,MAAM,sBAAsB,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAExD,SAAS;IACd,OAAO,IAAI,+JAAM,CAAC,IAAI,CAAC,MAAM,CAC3B,kBACA,sBACA;AAEJ;AAEO,eAAe,WAAW,KAAc;IAC7C,MAAM,eAAe;IAErB,MAAM,SAAS;QACb;KACD;IAED,MAAM,MAAM,aAAa,eAAe,CAAC;QACvC,aAAa;QACb,OAAO;QACP,OAAO,SAAS;QAChB,QAAQ;IACV;IAEA,OAAO;AACT;AAEO,eAAe,iBAAiB,IAAY;IACjD,MAAM,eAAe;IACrB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,aAAa,QAAQ,CAAC;IAC/C,OAAO;AACT;AAEO,eAAe,qBACpB,WAAmB,EACnB,MAAuB;IAEvB,MAAM,eAAe;IACrB,aAAa,cAAc,CAAC;QAAE,cAAc;IAAY;IAExD,MAAM,WAAW,+JAAM,CAAC,QAAQ,CAAC;QAAE,SAAS;QAAM,MAAM;IAAa;IACrE,MAAM,WAAqB,EAAE;IAE7B,KAAK,MAAM,SAAS,OAAQ;QAC1B,MAAM,YAAY,IAAI,KAAK,MAAM,KAAK;QACtC,MAAM,UAAU,MAAM,MAAM,GACxB,IAAI,KAAK,UAAU,OAAO,KAAK,KAAK,KAAK,KAAK,MAAM,+BAA+B;WACnF,IAAI,KAAK,UAAU,OAAO,KAAK,KAAK,KAAK,OAAO,kCAAkC;QAEtF,MAAM,cAAc;YAClB,SAAS,MAAM,KAAK;YACpB,aAAa,MAAM,WAAW,IAAI;YAClC,UAAU,MAAM,QAAQ,IAAI;YAC5B,OAAO,MAAM,MAAM,GACf;gBACE,MAAM,UAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBAC3C,UAAU;YACZ,IACA;gBACE,UAAU,UAAU,WAAW;gBAC/B,UAAU;YACZ;YACJ,KAAK,MAAM,MAAM,GACb;gBACE,MAAM,QAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBACzC,UAAU;YACZ,IACA;gBACE,UAAU,QAAQ,WAAW;gBAC7B,UAAU;YACZ;QACN;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,SAAS,MAAM,CAAC,MAAM,CAAC;gBAC5C,YAAY;gBACZ,aAAa;YACf;YAEA,IAAI,SAAS,IAAI,CAAC,EAAE,EAAE;gBACpB,SAAS,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;YAChC;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,CAAC,wBAAwB,EAAE,MAAM,KAAK,CAAC,EAAE,CAAC,EAAE;YAC1D,MAAM;QACR;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///Users/constantine/Documents/pj10-syllabus-to-cal-3pm/app/api/calendar/auth/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { getAuthUrl } from '@/lib/googleCalendar';\n\nexport async function GET(request: NextRequest) {\n  try {\n    const authUrl = await getAuthUrl();\n    \n    return NextResponse.json({\n      success: true,\n      authUrl,\n    });\n  } catch (error: any) {\n    console.error('Error generating auth URL:', error);\n    return NextResponse.json(\n      {\n        success: false,\n        error: error.message || 'Failed to generate authorization URL',\n      },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,qIAAU;QAEhC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT;QACF;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO,MAAM,OAAO,IAAI;QAC1B,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}